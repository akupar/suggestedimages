{% extends 'layout.html' %}

{% block content %}
  <form method="get">
    {% for message in get_flashed_messages() %}
    <div class="flash">{{ message }}</div>
    {% endfor %}
    <label for="title">{{ locale['Wiktionary'] }}</label>
    <select name="wikt" id="wikt">
      <option value="" {{ "selected" if request.args.get('wikt') == '' }}>default (English)</option>
      <option value="fi" {{ "selected" if request.args.get('wikt') == 'fi' }}>suomi</option>
      <option value="en" {{ "selected" if request.args.get('wikt') == 'en' }}>English</option>
      <option value="es" {{ "selected" if request.args.get('wikt') == 'es' }}>espa√±ol</option>
      <option value="sv" {{ "selected" if request.args.get('wikt') == 'sv' }}>svenska</option>
    </select>
    <label for="title">{{ locale['Language'] }}</label>
    <select name="lang" id="lang">
      <option value="" {{ "selected" if request.args.get('lang') == '' }}>{{ locale['(same)'] }}</option>
      <option value="fi" {{ "selected" if request.args.get('lang') == 'fi' }}>{{ locale.languages['fi'] }}</option>
      <option value="en" {{ "selected" if request.args.get('lang') == 'en' }}>{{ locale.languages['en'] }}</option>
      <option value="es" {{ "selected" if request.args.get('lang') == 'es' }}>{{ locale.languages['es'] }}</option>
      <option value="sv" {{ "selected" if request.args.get('lang') == 'sv' }}>{{ locale.languages['sv'] }}</option>
    </select>
    <label for="title">{{ locale['Title'] }}</label>
    <input name="title" id="title" value="{{ request.args.get('title') or "" }}" required autofocus>
    <input type="submit" value="{{ locale['Search'] }}">
  </form>
  <hr/>
  <div class="loading-message" style="display: none;">
    {{ locale['Loading...'] }}
  </div>
  <div class="gallery">
    {% if results|length == 0 %}
    {{ locale['No results.'] }}
    {% endif %}
    {% for result, wd in results %}
    <div class="imagebox {{ wd.color_class }}">
      <div class="box-header">
        <a href="{{ wd.url }}" title="{{ wd.text }}">{{ wd.id }}</a>
      </div>
      {% if result.url %}
      <a href="{{ result.url or '' }}">
        {% if result.type == 'image' %}
        <img class="result-image" src="{{ result.thumb }}" title="{{ wd.text }}">
        <code>{{ locale.format_image(result.name, result.caption) }}</code>
        {% elif result.type == 'link' %}
        <div class="result-link">
          <div>
            <img class="logo" src="/static/Commons-logo.svg">
            <span>{{ result.name }}</span>
          </div>
        </div>
        {% endif %}
      </a>
      {% else %}
        <img src="{{ result.thumb }}">
      {% endif %}
    </div>
    {% endfor %}
  </div>
{% endblock %}
